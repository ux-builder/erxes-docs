import { HeroPattern } from '@/components/HeroPattern'

<HeroPattern />

# 공통 함수

## 공통 함수

다음 `sendMessage` 함수는 관련된 플러그인과 작업할 때 사용됩니다.

`SendCommonMessage` 함수는 다음 매개변수를 사용하여 다른 서비스에 메시지를 보냅니다:

| 매개변수 | 설명 | 타입 |
| ---- | ---- | ----------- |
| `serviceName` | 메시지를 받을 서비스 이름. 예: 플러그인 이름. | `String` |
| `action` | 메시지의 동작. | `String` |
| `data` | 전달할 데이터. | `Object` |
| `isRPC` | 메시지 타입, true일 경우 메시지가 값을 반환합니다. | `Boolean` |
| `timeout` | 메시지에 대한 응답을 기다리는 시간 제한. | `Number` |
| `defaultValue` | 메시지를 보내는 동안 오류가 발생하면 반환되는 기본 값. | `any` |
| `serviceDiscovery` | 서비스 정보(예: 서비스 사용 가능 여부)를 포함하는 서비스 디스커버리. | `String` |
| `subdomain` | Erxes SaaS 버전에서 사용하는 서브도메인. 오픈 소스 플러그인을 개발할 때 'os'를 매개변수로 전달할 수 있습니다. | `String` |


```tsx
export const sendCommonMessage = async (
  args: ISendMessageArgs & { serviceName: string }
) => {
  return sendMessage({
    serviceDiscovery,
    client,
    ...args
  });
};

// 기본 serviceName 매개변수를 전달할 수 있으며 서버의 이름을 지정하여 사용할 수 있습니다.
export const sendCoreMessage = (args: ISendMessageArgs): Promise<any> => {
  return sendMessage({
    client,
    serviceDiscovery,
    serviceName: 'core',
    ...args
  });
};
```

Messagebroker는 consumeQueue와 consumeRPCQueue 두 가지 소비자 함수를 포함하고 있습니다. 이 둘의 차이점은 consumeRPCQueue는 값을 반환하지만 consumeQueue는 반환하지 않습니다.

consumeQueue와 consumeRPCQueue 함수는 다음 매개변수를 사용하여 다른 서비스로부터 메시지를 수신합니다:

| 매개변수	| 설명 | Ty타입pe |
| ---- | ---- | ----------- |
| `name` | 메시지를 받을 큐의 이름. 이름 형식은 serviceName:actionName입니다. | `String` |
| `data` | 서비스가 보내는 메시지의 데이터. | `String` |